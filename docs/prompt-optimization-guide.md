# プロンプト最適化ガイド

**作成日**: 2025-11-18  
**ステータス**: P2タスク - コンテンツ品質向上（4.1 プロンプト最適化）

---

## ✅ 実装完了内容

### 1. システムプロンプトの強化

**改善前:**
```
あなたは技術コンテンツの専門ライターです。TypeScriptエコシステムに関する高品質な記事を生成します。
```

**改善後:**
- 専門性の明確化（TypeScript、JavaScript、Next.js、React、Vue、Node.js等）
- 記事品質基準の5項目を明示
- 出力形式の詳細な指示（Markdown、コードブロック、見出し階層）

### 2. SEOキーワード最適化の組み込み

- プライマリキーワードとセカンダリキーワードの自動抽出
- タイトル・見出し・本文への自然な配置指示
- メタディスクリプション用要約（150-160文字）の生成指示

### 3. 読みやすさ向上の構造化指示

- 明確な階層構造（H2, H3見出しの適切な使用）
- 箇条書き・番号付きリストの効果的な活用
- 段落の適切な分割（3-5文程度）
- 視覚的な区切り（水平線、引用ブロック）の使用

### 4. 技術的正確性のチェック指示

- 最新の公式ドキュメント・仕様への準拠
- 動作確認済みコード例の記述
- バージョン情報の明記（TypeScript 5.x, Next.js 14.x等）
- 非推奨機能の回避、現行ベストプラクティスの推奨

### 5. 実用性と価値提供の強化

- 具体的なコード例を最低2-3個含める指示
- 実装手順の段階的説明
- よくあるエラーとその解決方法の記載
- ベストプラクティス・パフォーマンス最適化のヒント
- 読者が実際に試せるアクションアイテムの明示

### 6. エンゲージメント向上

- 導入部で読者の課題・疑問に共感
- 結論部で要点を再確認し、次のステップを提示
- 関連記事・リソースへのリンク提案

---

## 📝 実装ファイル

### `backend/services/content_generator.py`

- `_generate_prompt()` メソッド: プロンプト生成ロジックを大幅に改善
  - SEOキーワードパラメータの追加（オプショナル）
  - 5つの生成要件セクションを追加
  - 出力形式の詳細化

- `_generate_with_ai()` メソッド: システムプロンプトを強化
  - 専門性の明確化
  - 品質基準の明示
  - 出力形式の詳細指示

### `backend/utils/ai_client.py`

- `_generate_with_groq()` メソッド: プロンプトとシステムプロンプトを改善
  - SEOキーワードの自動抽出
  - 構造化された要件セクション
  - より詳細な出力形式指示

---

## 🎯 期待される効果

### 記事品質の向上

1. **SEO最適化**: キーワードが自然に配置され、検索エンジンでの可視性が向上
2. **読みやすさ**: 明確な構造と視覚的な区切りにより、読者の理解が向上
3. **技術的正確性**: 最新の公式仕様に準拠した正確な情報の提供
4. **実用性**: 即座に実装できるコード例とベストプラクティスの提供
5. **エンゲージメント**: 読者の課題に共感し、次のステップを明確に提示

### コンテンツ生成の一貫性

- すべての記事が同じ品質基準に準拠
- 構造化されたプロンプトにより、生成結果のばらつきが減少
- メタデータ（タイトル、要約、タグ）の品質が向上

---

## 🔄 今後の改善案

### プロンプトの動的調整

- コンテンツタイプに応じたプロンプトの微調整
- ターゲット読者レベルに応じた難易度調整
- A/Bテストによるプロンプト最適化

### 品質スコアリングとの連携

- 生成されたコンテンツの品質スコアに基づくプロンプト改善
- 低品質コンテンツの原因分析とプロンプト調整

### フィードバックループ

- ユーザーエンゲージメント（閲覧時間、シェア数等）に基づくプロンプト改善
- 高パフォーマンス記事のプロンプトパターン分析

---

## 📚 参考資料

- [OpenAI Prompt Engineering Guide](https://platform.openai.com/docs/guides/prompt-engineering)
- [Groq API Documentation](https://console.groq.com/docs)
- [TypeScript Official Documentation](https://www.typescriptlang.org/docs/)

---

これでプロンプト最適化の実装は完了です。次は「品質スコアリングアルゴリズム改善」に進みます。

